{% extends 'base.html' %}

{% block title %}
Рекомендации
{% endblock %}

{% block button %}
    <div class="buttons" align="right">
        {% if flag_btn %}
        <a class="btn btn-outline-primary" href="/account">Личный кабинет</a>
        <a class="btn btn-outline-primary" href="/busket">Корзина</a>
        {% if current_user.id == 5 %}
        <a class="btn btn-outline-primary" href="/admin">Admin</a>
        {% endif %}

        {% else %}
        <a class="btn btn-outline-primary" href="/signin">Регистрация</a>
        <a class="btn btn-outline-primary" href="/login">Вход</a>
        {% endif %}
    </div>
{% endblock %}

{% block body %}
<div class="recs">
    <h2 align="center"> Рекомендации </h2>
    <br>


<!-- pop-up -->
<div class="b-container" >
    
    <a class="h3_new" href="javascript:PopUpShow()" style="text-decoration: none; color: #000000;">Помогите нам стать лучше!</a></div>
<div class="b-popup" id="popup1">
    <div class="blocker" onclick="PopUpHide()"></div>
    <div class="b-popup-content" id="b-popup-content">
        <a href="javascript:PopUpHide()" class="cross" style="margin-left: 95%; margin-bottom: 10px;">&#10007;</a>
        <div class="container_feedback">
            <form action="/" method="post">

                        <!-- Hidden Required Fields -->
                <input type="hidden" name="project_name" value="Online-bookstore">
                <input type="hidden" name="admin_email" value="arunakungurova@mail.com">
                <input type="hidden" name="form_subject" value="feedback">
                <!-- END Hidden Required Fields -->
                <fieldset>
                        <div class="name_email">
                            <div class="left_info">
                                <label id="name_for_popup"> Имя </label>
                                <input name="Name" id="input_name" type="text" placeholder="Имя" required></input>
                            </div>
                            <div class="right_info">
                                <label id="name_for_popup"> Email </label>
                                <input name="Email" id="input_name" type="email" placeholder="Email" required></input>
                            </div>
                        </div>
                        <br>
                        <div class="message">
                            <label id="name_for_popup" align="left">Расскажите о том, что мы можем улучшить:</label>
                            <textarea name="Message" style="width: 100%;" placeholder="Введите ваше сообщение"></textarea></div>
                            <br>
                            <button class="btn-send" formnovalidate type="submit">Отправить</button>
                </fieldset>
                </form>
            </div>
    <!-- <a href="javascript:PopUpHide()" class="previous round" style="margin-left: 10px; margin-bottom: 10px;">&#8249;</a> -->
    </div>
</div>

    {% for ind in range(sz) %}
        <div class="alert alert-warning">
            <div>
                <img src="{{url_for('static', filename=pic[ind])}}" alt="{{ pic[ind]}}" class="Cover">
            </div>
            <div>
                <h3 align="left" class="h3_new">
                    {{ book[ind] }}
                </h3>
                <br>
                <h6>
                    Автор отзыва: {{ auth[ind]}}
                </h6>
                <br>
                <h6>
                    Оценка: {{rec[ind].rating}}/5
                </h6>
                <br>
                <div>
                    {{ rec[ind].comment}}
                </div>
            </div>
        </div>
    {% endfor %}
    </div>
    
    <script src="http://code.jquery.com/jquery-2.0.2.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script>
    $(document).ready(function(){
        //Скрыть PopUp при загрузке страницы    
        PopUpHide();
    });
    //Функция отображения PopUp
    function PopUpShow(){
        $("#popup1").show();
    }
    //Функция скрытия PopUp
    function PopUpHide(){
        $("#popup1").hide();

    }

    // $(document).click(function(e){
    //     if($(e.target).closest("b-popup").length){
    //         return;
    //     }
    //     $("b-popup").fadeOut();
    // })

    // let popupBG = document.querySelector('.b-popup-content');
    // let popup = document.querySelector('.container_feedback');
    // let openPopupButton = document.querySelector('b-container');

    // openPopupButton((button) =>{
    //     button.addEventListener('click',(e) =>{
    //         e.preventDefault();
    //         popupBG.classList.add('active');
    //         popup.classList.add('active');
    //     }
    //     )
    // }
    // )
    
    const el= document.getElementById('b-popup-content');
    
    // document.addEventListener("click", function(event)
    // {
    //     if (!document.getElementsByClassName('b-popup-content')[0].contians(event.target)) {
    //         console.log("YES")
    //     }

    //     console.log(event.target)
    // }
    // )


// let popupBg = document.querySelector('.b-popup')
// document.addEventListener('click', (e) =>{
//     if(e.target === popupBg){
//         PopUpHide;
//     }
// }
// );

    
//     $(function($){
//   $(b-container).mouseup(function (e){ // событие клика по веб-документу
//     var div = $("#popup1"); // тут указываем ID элемента
//     if (!div.is(e.target) // если клик был не по нашему блоку
//         && div.has(e.target).length === 0) { // и не по его дочерним элементам
//       div.hide(); // скрываем его
//     }
//   });
// });
</script>
<script src="static/main.js"></script>
{% endblock %}

